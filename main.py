import random
from openai import OpenAI

# –ë–∞–∑–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ä—à–∏—Ö –∞—Ä–∫–∞–Ω–æ–≤ –¢–∞—Ä–æ
tarot_cards = [
    '–®—É—Ç', '–ú–∞–≥', '–ñ—Ä–∏—Ü–∞', '–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞', '–ò–º–ø–µ—Ä–∞—Ç–æ—Ä', '–ò–µ—Ä–æ—Ñ–∞–Ω—Ç',
    '–í–ª—é–±–ª—ë–Ω–Ω—ã–µ', '–ö–æ–ª–µ—Å–Ω–∏—Ü–∞', '–°–∏–ª–∞', '–û—Ç—à–µ–ª—å–Ω–∏–∫', '–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã',
    '–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å', '–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π', '–°–º–µ—Ä—Ç—å', '–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å', '–î—å—è–≤–æ–ª',
    '–ë–∞—à–Ω—è', '–ó–≤–µ–∑–¥–∞', '–õ—É–Ω–∞', '–°–æ–ª–Ω—Ü–µ', '–°—É–¥', '–ú–∏—Ä'
]

# –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–∞—Ä—Ç
def generate_random_cards(cards, num=3):
    return random.sample(cards, num)

# –°–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_name = input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è: ")
user_birthdate = input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è (–î–î.–ú–ú.–ì–ì–ì–ì): ")
user_question = input("–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –¥–ª—è –¢–∞—Ä–æ: ")

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 3 —Å–ª—É—á–∞–π–Ω—ã–µ –∫–∞—Ä—Ç—ã –¥–ª—è –ø—Ä–æ—à–ª–æ–≥–æ, –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ, –±—É–¥—É—â–µ–≥–æ
past, present, future = generate_random_cards(tarot_cards)

# –§–æ—Ä–º–∏—Ä—É–µ–º prompt –¥–ª—è GPT
prompt = f"""
–¢—ã ‚Äî –æ–ø—ã—Ç–Ω—ã–π —Ç–∞—Ä–æ–ª–æ–≥. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {user_name}, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: {user_birthdate}, –≤–æ–ø—Ä–æ—Å: "{user_question}".

–ö–∞—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–∞–ª–∏ –≤ —Ä–∞—Å–∫–ª–∞–¥–µ (–ø—Ä–æ—à–ª–æ–µ-–Ω–∞—Å—Ç–æ—è—â–µ–µ-–±—É–¥—É—â–µ–µ):
–ü—Ä–æ—à–ª–æ–µ: ¬´{past}¬ª  
–ù–∞—Å—Ç–æ—è—â–µ–µ: ¬´{present}¬ª  
–ë—É–¥—É—â–µ–µ: ¬´{future}¬ª
–¢–æ–Ω —É —Ç–µ–±—è –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, –≥–æ–ª–æ—Å —Ä–∞–¥—É—à–Ω–æ–≥–æ —Å–æ–≤–µ—Ç—á–∏–∫–∞
–û–ø–∏—à–∏ –ø–æ–¥—Ä–æ–±–Ω–æ –∫–∞–∂–¥—É—é –∫–∞—Ä—Ç—É –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞. –ó–∞—Ç–µ–º –∫—Ä–∞—Ç–∫–æ –ø–æ–¥—ã—Ç–æ–∂—å –æ–±—â–∏–π —Å–º—ã—Å–ª —Ä–∞—Å–∫–ª–∞–¥–∞, –¥–∞–≤ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–æ–≤–µ—Ç –∏–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑ –¥–ª—è {user_name}.
"""

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OpenAI-–∫–ª–∏–µ–Ω—Ç–∞ —Å –≤–∞—à–∏–º API –∫–ª—é—á–æ–º
client = OpenAI(api_key=(''))

# –ó–∞–ø—Ä–æ—Å –∫ –Ω–æ–≤–æ–º—É API ChatCompletion
response = client.chat.completions.create(
    model="gpt-4.1-nano-2025-04-14",  # –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—É—é –≤–∞–º –º–æ–¥–µ–ª—å, –Ω–∞–ø—Ä–∏–º–µ—Ä "gpt-3.5-turbo" –∏–ª–∏ "gpt-4"
    messages=[
        {"role": "user", "content": prompt}
    ]
)

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞
tarot_reading = response.choices[0].message.content

# –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ —Ä–∞—Å–∫–ª–∞–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
print("\nüîÆ –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –¢–∞—Ä–æ:\n")
print(tarot_reading)
